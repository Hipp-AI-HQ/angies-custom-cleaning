---
phase: 04-polish-interactivity
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - commercial/index.html
  - commercial/js/main.js
  - commercial/css/base.css
  - residential/index.html
  - residential/js/main.js
  - residential/css/base.css
autonomous: true

must_haves:
  truths:
    - "Sections and cards fade up smoothly as user scrolls down the page on both sites"
    - "Navigation links scroll smoothly to target sections when clicked (not instant jump)"
    - "Animations respect prefers-reduced-motion accessibility preference"
    - "Scroll animations perform well on mobile (no jank or stuttering)"
  artifacts:
    - path: "commercial/index.html"
      provides: "AOS library loaded via CDN, data-aos attributes on sections and cards"
      contains: "aos.css"
    - path: "commercial/js/main.js"
      provides: "AOS initialization with scroll animation config"
      contains: "AOS.init"
    - path: "commercial/css/base.css"
      provides: "Smooth scroll CSS with reduced-motion support"
      contains: "scroll-behavior"
    - path: "residential/index.html"
      provides: "AOS library loaded via CDN, data-aos attributes on sections and cards"
      contains: "aos.css"
    - path: "residential/js/main.js"
      provides: "AOS initialization matching commercial site config"
      contains: "AOS.init"
  key_links:
    - from: "commercial/index.html"
      to: "https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/"
      via: "CDN link tags in <head> and before </body>"
      pattern: "aos\\.css|aos\\.js"
    - from: "commercial/js/main.js"
      to: "AOS.init()"
      via: "DOMContentLoaded event listener"
      pattern: "AOS\\.init"
    - from: "data-aos attributes"
      to: "AOS library"
      via: "AOS reads data-aos, data-aos-delay from DOM"
      pattern: "data-aos=\"fade-up\""
---

<objective>
Add scroll-triggered fade-up animations and smooth anchor scrolling to both sites using AOS library and CSS scroll-behavior.

Purpose: Transform sites from "competent" to "impressive" with subtle, professional scroll animations that feel modern and polished without being jarring. This is the foundation for premium demo quality.

Output: Both commercial and residential sites have scroll animations on all major sections and service cards, plus smooth scrolling when navigation links are clicked. All animations respect accessibility preferences.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/04-polish-interactivity/04-RESEARCH.md
@.planning/phases/03-residential-site/03-05-SUMMARY.md
@commercial/index.html
@commercial/js/main.js
@commercial/css/base.css
@residential/index.html
@residential/js/main.js
@residential/css/base.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add AOS library to both sites via CDN</name>
  <files>commercial/index.html, residential/index.html</files>
  <action>
Add AOS 2.3.4 library via CDN to both commercial and residential index.html files.

**In <head> section (after Google Fonts, before closing </head>):**
```html
<!-- AOS (Animate On Scroll) library -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
```

**Before </body> (after CountUp.js script, before main.js script):**
```html
<!-- AOS library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
```

Why AOS 2.3.4: Stable version, 5.7KB lightweight, zero dependencies, works via data attributes. Already using CDN pattern with CountUp.js so this is consistent. DO NOT use @next branch (beta).

Apply to BOTH sites with identical placement.
  </action>
  <verify>
```bash
# Check commercial site has AOS links
grep -n "aos" commercial/index.html

# Check residential site has AOS links
grep -n "aos" residential/index.html

# Both should show aos.css in <head> and aos.js before </body>
```
  </verify>
  <done>Both index.html files contain AOS CSS link in <head> and AOS JS script before </body>, positioned after CountUp.js and before main.js</done>
</task>

<task type="auto">
  <name>Task 2: Add data-aos attributes to sections and cards on both sites</name>
  <files>commercial/index.html, residential/index.html</files>
  <action>
Add `data-aos="fade-up"` attributes to major sections and cards on BOTH sites. Use consistent animation (fade-up only) with staggered delays for cards.

**Sections to animate (both sites):**
- `<section class="services section">` — data-aos="fade-up"
- `<section class="why-us section">` — data-aos="fade-up"
- `<section class="process section">` — data-aos="fade-up"
- `<section class="stats section">` — data-aos="fade-up"
- `<section class="testimonials section">` — data-aos="fade-up"
- `<section class="about section">` — data-aos="fade-up"
- `<section class="contact section">` — data-aos="fade-up"
- Residential only: `<section class="gift-cards section">` — data-aos="fade-up"

**Cards to animate with stagger (inside sections):**
- Service cards: First card data-aos="fade-up" data-aos-delay="0", second data-aos-delay="100", third data-aos-delay="200"
- Why Us benefit items: Stagger by 100ms increments (0, 100, 200, 300, 400, 500)
- Process steps: Stagger by 100ms increments
- Testimonial cards: Stagger by 100ms increments
- Residential gift card pricing cards: Stagger by 100ms increments (0, 100, 200, 300)

DO NOT animate:
- Hero section (should be visible immediately, no scroll trigger needed)
- Header (always visible)
- Footer (no animation needed)
- Individual text elements (animate parent containers, not children)

Pattern example:
```html
<section class="services section" data-aos="fade-up">
  <div class="service-card" data-aos="fade-up" data-aos-delay="0">...</div>
  <div class="service-card" data-aos="fade-up" data-aos-delay="100">...</div>
  <div class="service-card" data-aos="fade-up" data-aos-delay="200">...</div>
</section>
```

Apply identical pattern to BOTH commercial and residential sites (residential has additional gift-cards section).
  </action>
  <verify>
```bash
# Check commercial site has data-aos attributes
grep -c 'data-aos="fade-up"' commercial/index.html

# Check residential site has data-aos attributes
grep -c 'data-aos="fade-up"' residential/index.html

# Check staggered delays exist
grep 'data-aos-delay' commercial/index.html | head -5

# Both sites should show multiple data-aos attributes with delays
```
  </verify>
  <done>Both index.html files have data-aos="fade-up" on all major sections (services, why-us, process, stats, testimonials, about, contact, plus gift-cards on residential), and staggered delays (0, 100, 200ms increments) on cards within sections</done>
</task>

<task type="auto">
  <name>Task 3: Initialize AOS and add smooth scroll to both sites</name>
  <files>commercial/js/main.js, residential/js/main.js, commercial/css/base.css, residential/css/base.css</files>
  <action>
**Step 1: Add AOS initialization to main.js on BOTH sites**

Add at the END of main.js (after existing DOMContentLoaded handlers), following existing code style:

```javascript
/**
 * Initialize AOS (Animate On Scroll) library
 * Fade-up animations triggered on scroll into view
 */
document.addEventListener('DOMContentLoaded', function() {
  AOS.init({
    // Animation settings
    duration: 600,           // Duration (ms) - keep short for snappy feel
    easing: 'ease-out',      // Easing function
    once: true,              // Animate only once (performance + UX)

    // Trigger settings
    offset: 50,              // Offset from viewport (px) - lower for mobile
    delay: 0,                // Global delay (use data-aos-delay for per-element)

    // Behavior
    disable: false,          // Never disable on mobile
    mirror: false,           // Don't animate out on scroll up
    anchorPlacement: 'top-bottom', // When top of element hits bottom of viewport
  });
});
```

**Step 2: Add smooth scroll CSS to base.css on BOTH sites**

Add at the END of base.css (after existing rules):

```css
/* ==========================================================================
   Smooth Scroll Behavior
   ========================================================================== */

html {
  scroll-behavior: smooth;
}

/* Accessibility: Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  /* Disable AOS animations for users with motion sensitivity */
  [data-aos] {
    animation: none !important;
    transition: none !important;
  }
}
```

**Step 3: Add smooth scroll JavaScript enhancement to main.js**

Add at the END of main.js (after AOS init):

```javascript
/**
 * Smooth scroll enhancement for anchor links
 * Handles navigation links to same-page sections
 */
document.addEventListener('DOMContentLoaded', function() {
  const anchorLinks = document.querySelectorAll('a[href^="#"]');

  anchorLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      const targetId = this.getAttribute('href');

      // Ignore empty hash or hash-only
      if (targetId === '#' || targetId === '#!') return;

      const targetElement = document.querySelector(targetId);

      if (targetElement) {
        e.preventDefault();

        // Smooth scroll to target
        targetElement.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });

        // Update URL without jump
        if (history.pushState) {
          history.pushState(null, '', targetId);
        }
      }
    });
  });
});
```

Apply IDENTICAL code to BOTH commercial and residential sites (main.js and base.css).

Why this approach: Follows existing code patterns (DOMContentLoaded, querySelector, same comment style), uses established AOS configuration from research, respects accessibility with reduced-motion support.
  </action>
  <verify>
```bash
# Check AOS init exists in both sites
grep -n "AOS.init" commercial/js/main.js
grep -n "AOS.init" residential/js/main.js

# Check smooth scroll CSS exists in both sites
grep -n "scroll-behavior" commercial/css/base.css
grep -n "scroll-behavior" residential/css/base.css

# Check smooth scroll JS enhancement exists in both sites
grep -n "scrollIntoView" commercial/js/main.js
grep -n "scrollIntoView" residential/js/main.js

# Verify reduced-motion support
grep -n "prefers-reduced-motion" commercial/css/base.css
grep -n "prefers-reduced-motion" residential/css/base.css
```
  </verify>
  <done>Both main.js files contain AOS.init() with configuration (duration: 600, easing: ease-out, once: true, offset: 50, disable: false) and smooth scroll enhancement for anchor links. Both base.css files have scroll-behavior: smooth with prefers-reduced-motion media query disabling animations for accessibility.</done>
</task>

</tasks>

<verification>
**Manual testing (both sites):**

1. **Open commercial site in browser**
   - Scroll down slowly
   - Services section should fade up when it comes into view
   - Service cards should stagger (0ms, 100ms, 200ms delays visible)
   - Continue scrolling: each section (Why Us, Process, Stats, Testimonials, About, Contact) fades up
   - Animation happens once only (scroll up and back down — no re-animation)

2. **Test smooth scrolling (both sites)**
   - Click navigation link (e.g., "Services" in header)
   - Page should scroll smoothly (not jump) to target section
   - URL should update to include anchor hash (#services)

3. **Test reduced motion (both sites)**
   - Open DevTools → Cmd+Shift+P → "Emulate CSS prefers-reduced-motion"
   - Refresh page and scroll
   - No animations should occur (instant appearance)

4. **Test mobile (both sites)**
   - DevTools responsive mode → 375px width
   - Scroll through page
   - Animations should work (not disabled on mobile)
   - Performance should feel smooth (no jank)

5. **Repeat all tests for residential site**
   - Verify gift-cards section also animates
   - Verify gift card pricing cards stagger

**Expected results:**
- All sections fade up smoothly on scroll
- Cards within sections stagger by 100ms
- Smooth scrolling on anchor link clicks
- No animations when reduced-motion is set
- Smooth performance on mobile viewport
- Identical behavior on both sites
</verification>

<success_criteria>
**Scroll animations working:**
- User scrolls down commercial site → services, why-us, process, stats, testimonials, about, and contact sections fade up into view
- User scrolls down residential site → same sections PLUS gift-cards section fade up into view
- Service cards stagger (visible 100ms delay between each card appearing)
- Animations trigger at ~50px before element enters viewport (not waiting until fully visible)
- Animations happen once per page load (not re-triggering on scroll up)

**Smooth scrolling working:**
- User clicks "Services" link in navigation → page smoothly scrolls to #services (not instant jump)
- URL updates to include anchor hash without page reload
- All anchor links on both sites work with smooth scroll

**Accessibility respected:**
- Browser with prefers-reduced-motion enabled → no animations occur, instant appearance
- Scroll behavior auto (not smooth) when reduced motion preferred

**Performance:**
- Mobile viewport (375px) → animations perform smoothly, no stuttering or frame drops
- Opening DevTools Performance tab while scrolling shows 60fps maintained

**Both sites identical:**
- Commercial and residential sites have same animation timing, easing, and behavior
- Only difference: residential has additional gift-cards section animated
</success_criteria>

<output>
After completion, create `.planning/phases/04-polish-interactivity/04-01-SUMMARY.md` documenting:
- AOS version and CDN links added
- Sections and cards animated (list counts for each site)
- AOS configuration used (duration, easing, once, offset)
- Smooth scroll implementation (CSS + JS)
- Accessibility support (reduced-motion query)
- Verification results (manual testing notes)
</output>
