---
phase: 04-polish-interactivity
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - commercial/css/variables.css
  - commercial/css/components.css
  - commercial/index.html
  - residential/css/variables.css
  - residential/css/components.css
  - residential/index.html
autonomous: true

must_haves:
  truths:
    - "On mobile, a Call Now button is always visible at bottom of viewport on both sites"
    - "On desktop, hovering over buttons shows lift + shadow transition"
    - "On desktop, hovering over service cards shows lift + shadow transition"
    - "Hover effects do NOT apply on mobile (no sticky hover after tap)"
    - "Mobile CTA does not cover footer content or form buttons"
  artifacts:
    - path: "commercial/css/variables.css"
      provides: "Z-index scale for fixed elements"
      contains: "--z-mobile-cta"
    - path: "commercial/css/components.css"
      provides: "Mobile CTA styling and button/card hover effects"
      min_lines: 80
    - path: "commercial/index.html"
      provides: "Mobile CTA HTML element"
      contains: "mobile-cta"
    - path: "residential/css/variables.css"
      provides: "Z-index scale matching commercial"
      contains: "--z-mobile-cta"
    - path: "residential/css/components.css"
      provides: "Mobile CTA and hover effects matching commercial"
      min_lines: 80
  key_links:
    - from: ".mobile-cta"
      to: "tel:+17176150968"
      via: "href attribute"
      pattern: "tel:\\+17176150968"
    - from: ".btn:hover, .service-card:hover"
      to: "transform: translateY(-4px)"
      via: "CSS hover pseudo-class with @media (hover: hover)"
      pattern: "@media.*hover.*hover"
    - from: ".mobile-cta"
      to: "position: fixed; bottom: 0"
      via: "CSS positioning with z-index"
      pattern: "position: fixed"
---

<objective>
Add mobile-specific sticky CTA bar and desktop hover effects (lift + shadow) to buttons and cards on both sites.

Purpose: Improve mobile UX with always-accessible phone number, and add premium polish on desktop with subtle hover animations. This elevates the demo from "functional" to "delightful."

Output: Both commercial and residential sites have a fixed Call Now button at bottom on mobile (<= 768px), and desktop hover effects on buttons and service cards that use GPU-accelerated transforms for smooth 60fps performance.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/04-polish-interactivity/04-RESEARCH.md
@commercial/css/variables.css
@commercial/index.html
@residential/css/variables.css
@residential/index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add z-index scale to variables.css on both sites</name>
  <files>commercial/css/variables.css, residential/css/variables.css</files>
  <action>
Add z-index custom properties to variables.css on BOTH sites. Insert after the existing --transition variables (at end of :root block, before closing brace).

```css
  /* ---- Z-Index Scale ---- */

  --z-header: 100;
  --z-overlay: 999;
  --z-menu: 1000;
  --z-mobile-cta: 1000;
  --z-hamburger: 1001;
```

Why systematic z-index: Fixed positioning creates stacking contexts. Using CSS variables prevents z-index conflicts. Header is 100 (lowest), mobile CTA and menu are 1000 (high), hamburger is 1001 (highest, needs to be clickable over menu).

Apply IDENTICAL code to both commercial and residential sites.
  </action>
  <verify>
```bash
# Check z-index variables exist in both sites
grep -n "z-mobile-cta" commercial/css/variables.css
grep -n "z-mobile-cta" residential/css/variables.css

# Verify all z-index vars present
grep "z-" commercial/css/variables.css
grep "z-" residential/css/variables.css
```
  </verify>
  <done>Both variables.css files contain z-index scale (--z-header: 100, --z-overlay: 999, --z-menu: 1000, --z-mobile-cta: 1000, --z-hamburger: 1001) at end of :root block</done>
</task>

<task type="auto">
  <name>Task 2: Add mobile CTA styling to components.css on both sites</name>
  <files>commercial/css/components.css, residential/css/components.css</files>
  <action>
Create components.css on BOTH sites (file does not currently exist). Add mobile CTA bar styles.

```css
/* ==========================================================================
   Components
   Reusable UI components and interactive elements
   ========================================================================== */

/* ==========================================================================
   Mobile CTA Bar
   Fixed call-to-action button at bottom of mobile viewport
   ========================================================================== */

.mobile-cta {
  /* Hidden by default (desktop) */
  display: none;

  /* Mobile only (<= 768px) */
  @media (max-width: 768px) {
    display: block;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: var(--z-mobile-cta);

    /* Styling using existing CSS variables */
    background-color: var(--color-accent);
    color: var(--color-white);
    padding: var(--space-md);
    text-align: center;
    font-size: var(--fs-md);
    font-weight: 600;
    line-height: 1.2;

    /* Shadow for elevation */
    box-shadow: var(--shadow-lg);

    /* Remove default link styling */
    text-decoration: none;

    /* Safe area for iOS notch */
    padding-bottom: calc(var(--space-md) + env(safe-area-inset-bottom));

    /* Prevent text selection on tap */
    user-select: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;

    /* Transition for active state */
    transition: background-color var(--transition-fast);
  }

  /* Active state (tap feedback) */
  @media (max-width: 768px) {
    &:active {
      background-color: var(--color-accent-hover);
    }
  }
}

/* Body padding to prevent mobile CTA from covering footer content */
@media (max-width: 768px) {
  body {
    padding-bottom: 70px; /* Height of mobile CTA + buffer */
  }
}
```

Apply IDENTICAL styling to both commercial and residential sites.

**Important:** Use @media (max-width: 768px) to match existing breakpoint pattern. Use existing CSS variables (--color-accent, --space-md, --shadow-lg, etc.) for consistency.
  </action>
  <verify>
```bash
# Check components.css was created
ls commercial/css/components.css residential/css/components.css

# Check mobile CTA styles exist
grep -n "mobile-cta" commercial/css/components.css
grep -n "mobile-cta" residential/css/components.css

# Check body padding exists
grep -n "body.*padding-bottom" commercial/css/components.css
grep -n "body.*padding-bottom" residential/css/components.css
```
  </verify>
  <done>Both components.css files created and contain .mobile-cta styles (fixed position, bottom: 0, orange accent background, z-index from variable) and body padding-bottom: 70px on mobile to prevent content overlap</done>
</task>

<task type="auto">
  <name>Task 3: Add hover effects for buttons and cards to components.css</name>
  <files>commercial/css/components.css, residential/css/components.css</files>
  <action>
Add button and service card hover effects to components.css on BOTH sites. Append after mobile CTA styles.

```css
/* ==========================================================================
   Button Hover Effects
   GPU-accelerated lift + shadow transitions (desktop only)
   ========================================================================== */

.btn {
  /* Base state */
  position: relative;
  box-shadow: var(--shadow-sm);
  transition: transform var(--transition-base), box-shadow var(--transition-base);

  /* Promote to GPU layer for smooth animation */
  will-change: transform;
}

/* Pre-render hover shadow on pseudo-element (performance optimization) */
.btn::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow: var(--shadow-lg);
  opacity: 0;
  transition: opacity var(--transition-base);
  pointer-events: none;
  z-index: -1;
}

/* Hover effect (desktop only - devices with true hover capability) */
@media (hover: hover) and (pointer: fine) {
  .btn:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
  }

  .btn:hover::after {
    opacity: 1;
  }
}

/* Active state (click feedback for all devices) */
.btn:active {
  transform: translateY(-2px);
}

/* Focus state (keyboard navigation accessibility) */
.btn:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 4px;
}

/* ==========================================================================
   Service Card Hover Effects
   Subtle lift on hover (desktop only)
   ========================================================================== */

.service-card {
  position: relative;
  box-shadow: var(--shadow-sm);
  transition: transform var(--transition-base), box-shadow var(--transition-base);
}

/* Desktop hover only */
@media (hover: hover) and (pointer: fine) {
  .service-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-md);
  }
}
```

Apply IDENTICAL styling to both commercial and residential sites.

**Why this approach:**
- `@media (hover: hover) and (pointer: fine)` prevents sticky hover on mobile touch devices
- `transform: translateY()` is GPU-accelerated (60fps smooth)
- `::after` pseudo-element for shadow pre-rendering (better performance than animating box-shadow directly)
- `will-change: transform` promotes to GPU layer
- Existing CSS variables for shadows and transitions (--shadow-sm, --shadow-md, --shadow-lg, --transition-base)

**Selectors match existing HTML:**
- `.btn` class exists on CTA buttons in HTML (not .button)
- `.service-card` class exists on service cards
  </action>
  <verify>
```bash
# Check hover effects exist in both sites
grep -n "btn:hover" commercial/css/components.css
grep -n "service-card:hover" commercial/css/components.css
grep -n "btn:hover" residential/css/components.css
grep -n "service-card:hover" residential/css/components.css

# Verify hover media query exists (prevents mobile sticky hover)
grep -n "hover: hover" commercial/css/components.css
grep -n "hover: hover" residential/css/components.css

# Check that .btn and .service-card classes exist in HTML
grep -c "class.*btn" commercial/index.html
grep -c "class.*service-card" commercial/index.html
```
  </verify>
  <done>Both components.css files contain button and service-card hover effects using translateY transform, @media (hover: hover) for desktop-only application, ::after pseudo-element for shadow optimization, and existing CSS variables for consistent styling. CSS selectors (.btn) match actual HTML classes.</done>
</task>

<task type="auto">
  <name>Task 4: Add mobile CTA HTML element to both sites</name>
  <files>commercial/index.html, residential/index.html</files>
  <action>
Add mobile CTA HTML element to BOTH sites. Insert BEFORE closing `</body>` tag (after all content, before script tags).

**For commercial site:**
```html
  <!-- Mobile CTA Bar (fixed bottom, mobile only) -->
  <a href="tel:+17176150968" class="mobile-cta" aria-label="Call Angie's Custom Cleaning">
    ðŸ“ž Call Now: 717-615-0968
  </a>

  <!-- CountUp.js via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/countup.js@2.8.0/dist/countUp.umd.js"></script>
  <!-- ... existing scripts ... -->
</body>
```

**For residential site (identical phone number):**
```html
  <!-- Mobile CTA Bar (fixed bottom, mobile only) -->
  <a href="tel:+17176150968" class="mobile-cta" aria-label="Call Angie's Custom Cleaning">
    ðŸ“ž Call Now: 717-615-0968
  </a>

  <!-- CountUp.js via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/countup.js@2.8.0/dist/countUp.umd.js"></script>
  <!-- ... existing scripts ... -->
</body>
```

**Placement:** After footer, before scripts. This ensures it appears on top of all content due to z-index.

**Phone number:** 717-615-0968 (verified from PROJECT.md business info)

**Accessibility:** aria-label provides context for screen readers, tel: link works on mobile for tap-to-call.

Apply to BOTH sites with identical HTML.

**Also add components.css to <head>:**
After commercial.css or residential.css (before closing </head>):
```html
  <link rel="stylesheet" href="css/components.css">
```
  </action>
  <verify>
```bash
# Check mobile CTA HTML exists in both sites
grep -n "mobile-cta" commercial/index.html
grep -n "mobile-cta" residential/index.html

# Verify phone number is correct
grep "tel:" commercial/index.html | grep "7176150968"
grep "tel:" residential/index.html | grep "7176150968"

# Check components.css is linked in both sites
grep "components.css" commercial/index.html
grep "components.css" residential/index.html

# Verify placement (should be before </body>)
grep -A2 "mobile-cta" commercial/index.html | grep -c "script"
```
  </verify>
  <done>Both index.html files contain mobile CTA element with tel: link to 717-615-0968, aria-label for accessibility, positioned before closing </body> tag. Both sites have components.css linked in <head> after site-specific CSS.</done>
</task>

</tasks>

<verification>
**Manual testing (both sites):**

1. **Test mobile CTA (mobile viewport)**
   - Open commercial site in browser
   - DevTools â†’ Responsive mode â†’ 375px width
   - Scroll to bottom of page
   - Orange "Call Now" button should be fixed at bottom of viewport
   - Scroll up â†’ button stays at bottom (doesn't scroll away)
   - Footer content should NOT be hidden behind button (70px body padding)
   - Tap button â†’ should trigger phone call (tel: link)
   - Repeat for residential site

2. **Test desktop (no mobile CTA)**
   - Resize to > 768px width
   - Mobile CTA button should NOT be visible (display: none)
   - Verify on both sites

3. **Test button hover (desktop)**
   - Desktop viewport (1024px+)
   - Hover over any .btn element (CTA buttons)
   - Button should lift up 4px with shadow transition
   - Move mouse away â†’ button returns to normal
   - Click button â†’ slight press effect (translateY -2px)
   - Repeat on both sites

4. **Test service card hover (desktop)**
   - Desktop viewport (1024px+)
   - Hover over service cards
   - Card should lift up 8px with shadow transition
   - Move mouse away â†’ card returns to normal
   - Repeat on both sites

5. **Test mobile (no sticky hover)**
   - DevTools â†’ 375px width
   - Tap a button or service card
   - Should NOT stay in "hover" state after tap
   - No lift effect on mobile (hover disabled via media query)
   - Repeat on both sites

6. **Test z-index stacking**
   - Mobile viewport
   - Scroll to footer
   - Mobile CTA should be above footer content
   - No content should appear on top of mobile CTA

**Expected results:**
- Mobile CTA visible at bottom on mobile only (<= 768px)
- Desktop hover effects work on buttons and cards (> 768px with hover capability)
- No hover effects on mobile (touch devices)
- Smooth 60fps animations on hover
- No footer content hidden by mobile CTA (body padding working)
- Identical behavior on both sites
</verification>

<success_criteria>
**Mobile CTA working:**
- User opens commercial site on mobile (375px) â†’ orange "Call Now: 717-615-0968" button fixed at bottom of screen
- User scrolls page â†’ button stays at bottom (fixed position)
- User scrolls to footer â†’ footer content visible, not covered by button (body padding working)
- User taps button â†’ phone dialer opens with 717-615-0968 pre-filled
- User opens on desktop (1024px+) â†’ mobile CTA not visible
- Residential site has identical mobile CTA behavior

**Desktop hover effects working:**
- User hovers over CTA button on desktop â†’ button lifts up 4px, shadow increases (smooth transition)
- User moves mouse away â†’ button returns to original position
- User hovers over service card â†’ card lifts up 8px, shadow increases
- All hover transitions are smooth (60fps, no jank)

**Mobile hover prevented:**
- User taps button on mobile â†’ no lift effect, no sticky hover state
- User taps service card on mobile â†’ no lift effect
- Hover effects apply ONLY on devices with true hover capability (not touch devices)

**Visual consistency:**
- Mobile CTA uses accent orange (#E67E22) matching existing buttons
- Hover shadows use existing shadow scale (--shadow-sm, --shadow-md, --shadow-lg)
- All transitions use existing timing (--transition-base, --transition-fast)
- Commercial and residential sites have identical styling and behavior

**Performance:**
- Opening DevTools Performance tab and hovering over elements shows 60fps maintained
- No layout thrashing or excessive repaints
- GPU acceleration working (transform and opacity only)
</success_criteria>

<output>
After completion, create `.planning/phases/04-polish-interactivity/04-02-SUMMARY.md` documenting:
- Mobile CTA implementation (HTML structure, CSS styling, z-index)
- Button and card hover effects (transform values, shadow transitions)
- Desktop-only hover media query (hover: hover) and (pointer: fine)
- Performance optimizations (GPU acceleration, ::after pseudo-element)
- Z-index scale added to variables.css
- Verification results (manual testing notes for mobile and desktop)
</output>
